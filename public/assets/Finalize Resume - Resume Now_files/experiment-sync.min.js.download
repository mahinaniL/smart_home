(()=>{"use strict";const t={get:function(t){return fetch(t).then(function(t){if(t.ok)return t.json();throw Error(t)}).then(function(t){return t})},post:function(t,e,r){return this.request(t,e,"POST",r)},put:function(t,e){return this.request(t,e,"PUT",!1)},request:function(t,e,r,n){return fetch(t,{method:r,body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return t.ok?n?t.json():t:Promise.reject(t)}).then(function(t){return t})}};var e="".concat(window.location.origin,"/experiment"),r=365,n="".concat(e,"/").concat("v1/ui_experiments/visitor_experiment_conduction"),o="".concat(e,"/").concat("v1/visitor_layers"),i="".concat(e,"/").concat("v1/cdn_experiments/experiment_detail"),a="".concat(e,"/").concat("v1/ui_experiments/logging");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e,r){return(e=function(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(e){var r=e;r.useragent=navigator.userAgent,r.requesturl=window.location.href;var n=s(s({},"loglevel","Error"),"data",JSON.stringify(r));t.post(a,n)}function l(t){for(var e="".concat(t,"="),r=document.cookie.split(";"),n=0;n<r.length;n++){for(var o=r[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null}function f(t){return function(t){try{if(JSON.parse(t).lID)return!0}catch(t){return!1}return!0}(t)?JSON.parse(t):(r="1"===(e=t.split("_"))[1],{lID:e[0],sts:r,pCD:e[2],lCD:e[3]});var e,r}function v(t){var e={};return t.split(",").forEach(function(t){var r=t.split("_"),n="1"===r[2],o="1"===r[3];e[r[0]]={vID:r[1],sts:n,isGv:o,pCD:r[4],tSt:r[5]}}),e}function p(){try{return window.localStorage.getItem("__random_key__"),!0}catch(t){return!1}}function y(t,e){var r={JsFileName:"experiment-sync.min.js",UserType:"Visitor",AbTestUid:e};t&&(r.Message=t.message,r.stack=t.stack),u(r)}function m(){var t=function(){try{var t=l("visitor_layeruid")||null;if(!t)return;var e=f(t).pCD.toUpperCase();return"ZBR"==e?"br-vstr":"ZUK"==e?"uk-vstr":"ZAU"==e?"au-vstr":"ZIN"==e?"in-vstr":"GES"==e?"_snt_es":"GFR"==e?"_snt_fr":"GIT"==e?"_snt_it":"GDE"==e?"_snt_de":"GPL"==e?"_snt_pl":"vstr"}catch(t){return"vstr"}}();return l(t)}const g={transformCookieIntoObject:v,getExperimentObject:function(t){return function(t){try{var e=JSON.parse(t);Object.keys(e).forEach(function(t){if(void 0!==e[t])return!0})}catch(t){return!1}return!0}(t)?JSON.parse(t):v(t)},getLayerObject:f,getLayerCookieString:function(t){var e="".concat(t.lID);return e+=t.sts?"_1":"_0",(e+="_".concat(t.pCD))+(t.lCD?"_".concat(t.lCD):"")},getVisitorCookie:m,getStorageValue:function(t){return function(t,e){var r="";try{p()&&(r=t.getItem(e)),r&&(r=JSON.parse(r))}catch(t){y({message:"Error in reading local storage value:".concat(r)}),y(t)}return r}(localStorage,t)},setStorageValue:function(t,e,r){r||p()&&window.localStorage.setItem(t,JSON.stringify(e))},getCookieString:function(t){var e="";return Object.keys(t).forEach(function(r){var n,o,i,a,c,s=t[r];void 0===s.tSt&&(s.tSt=(o=(n=new Date).getFullYear().toString().substr(-2),i=n.getMonth()+1,c="",c+=(a=n.getDate())<10?"0"+a:a,(c+=i<10?"0"+i:i)+o)),""!=e&&(e+=","),e+="".concat(r,"_").concat(s.vID),"failed"==s.sts?e+="_0":e+=s.sts?"_1":"_0",e+=s.isGv?"_1":"_0",e+="_".concat(s.pCD,"_").concat(s.tSt)}),e},fireEvent:function(e,r){var n=s({},"ExperimentUid",e);t.post(i,n,!0).then(function(t){t&&"function"==typeof fireExperimentEvent&&fireExperimentEvent(t.Experiment[0].ExperimentName,t.Experiment[0].AbTestVariants.filter(function(t){return t.Variant==r})[0].Label,e)})},readCookie:l,createCookie:function(t,e,r){var n="";if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),n="expires=".concat(o.toUTCString())}else n="";for(var i="",a=0,c=0;c<window.location.host.length;c++)"."==window.location.host[c]&&a++;-1!==(i=2==a?"domain=".concat(window.location.host.substr(window.location.host.indexOf("."),window.location.host.length)):"domain=.".concat(window.location.host)).indexOf("localhost")&&(i=""),document.cookie="".concat(t,"=").concat(e,";").concat(n,"; path=/;").concat(i)},isFailedStatus:function(t){return t.status>=400&&t.status<=410},allSettled:function(t){return Promise.all(t.map(function(t){return t.then(function(t){return{status:"fulfilled",value:t}}).catch(function(t){return{status:"rejected",reason:t}})}))},logVisitorIdError:function(e,r){var n={JsFileName:"experiment-sync.min.js",UserType:"Visitor"};n.Message=e,n.stack=r;try{n.UserUid=this.getVisitorCookie()}catch(t){n.message=t.message,n.stack=t.stack}!function(e){var r=e;r.useragent=navigator.userAgent,r.requesturl=window.location.href;var n=s(s({},"loglevel","Warning"),"data",JSON.stringify(r));t.post(a,n)}(n)},logSeqError:function(t,e){var r={JsFileName:"experiment-sync.min.js",UserType:"Visitor",AbTestUid:e};t&&(r.Message=t.message,r.stack=t.stack);try{r.UserUid=m()}catch(t){r.message=t.message,r.stack=t.stack}u(r)},logSeqErrorWithoutUserId:y};function d(t,e,r){var n="";if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),n="expires=".concat(o.toUTCString())}else n="";for(var i,a=0,c=0;c<window.location.host.length;c++)"."==window.location.host[c]&&a++;i=2==a?"domain=".concat(window.location.host.substr(window.location.host.indexOf("."),window.location.host.length)):"domain=.".concat(window.location.host),document.cookie="".concat(t,"=").concat(e,";").concat(n,"; path=/;").concat(i)}const b=new function(){var e={};return function(r,n,o,i){var a,c,s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(!e[o]||(a=e[o],c=n,s=!0,Object.keys(a).forEach(function(t){a[t]!==c[t]&&(s=!1)}),!s))&&(e[o]=n,t.post(r,n).then(function(t){return u(t,i,o)}).catch(function(e){g.isFailedStatus(e)&&u(e,i,o),500===e.status&&t.post(r,n).then(function(t){return u(t,i,o)})}))}},h=(new function(){var t=null;return function(){return t||(t=new Promise(function(t){var e=setInterval(function(){var r=["vstr","br-vstr","uk-vstr","au-vstr","in-vstr","_snt_es","_snt_fr","_snt_it","_snt_de","_snt_pl"].find(function(t){return null!=g.readCookie(t)});if(r){var n=g.readCookie(r);n&&(clearInterval(e),t(n))}},"".concat("50"))})),t}})();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k(n.key),n)}}function _(t,e,r){return e&&w(t.prototype,e),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function k(t){var e=function(t){if("object"!=S(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:e+""}var C=_(function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r})});function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function E(t,e,r){return(e=D(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D(n.key),n)}}function D(t){var e=function(t){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:e+""}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,i=[{key:"handleVisitorLayerAjaxResponse",value:function(e,n,o){try{e.ok?(n.sts=!0,d("visitor_layeruid",g.getLayerCookieString(n),r),t.layerDeferredPromise.resolve()):(e.status>=400&&e.status<=410&&(n.sts="failed",d("visitor_layeruid",g.getLayerCookieString(n),r)),409===e.status&&e.json().then(function(t){JSON.parse(t.DeveloperMessage).existingLayerId,n.pCD,n.lCD,d("visitor_layeruid",g.getLayerCookieString(n),r)}),t.layerDeferredPromise.reject(e))}catch(t){g.logSeqError(t)}}},{key:"sendSaveVisitorExperimentRequest",value:function(t,e,o,i){try{b(n,t,e,o,function(t,e,n){t.ok?(e[n].sts=!0,d("ew_exp",g.getCookieString(e),r),g.fireEvent(n,e[n].vID)):409===t.status?(e[n].sts=!0,d("ew_exp",g.getCookieString(e),r)):g.isFailedStatus(t)&&(e[n].sts="failed",d("ew_exp",g.getCookieString(e),r))})}catch(t){g.logSeqError(t)}}},{key:"sendSaveVisitorLayerRequest",value:function(t,e){try{this.VisitorUId=t;var r=E(E(E({},"visitoruid",t),"layeruid",e.lID),"portalcd",e.pCD);b(o,r,e.lID,e,this.handleVisitorLayerAjaxResponse)}catch(t){g.logSeqError(t)}}}],null&&j(e.prototype,null),i&&j(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function T(t,e,r){return(e=function(t){var e=function(t){if("object"!=P(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(){try{var t=g.readCookie("ew_exp")||null,e=g.getVisitorCookie();if(!t)return;var r=g.getExperimentObject(t);Object.keys(r).forEach(function(t){var n=r[t];if(n&&!n.sts){var o=T(T(T(T(T({},"Variant",n.vID),"isgoverned",n.isGv),"portalcd",n.pCD),"experimentid",t),"participantid",e);O.sendSaveVisitorExperimentRequest(o,t,r,e)}})}catch(t){g.logSeqError(t)}}O.VisitorUId=g.getVisitorCookie(),O.layerDeferredPromise=new C;const V=function(){!function(){try{var t=g.getStorageValue("visitor_layeruid")||{LayerUid:null};if(t&&t.LayerUid){var e="".concat(t.LayerUid);e+="_1_",e+="".concat(t.PortalCd),d("visitor_layeruid",e+="_".concat(t.LayerTypeCd),r),O.layerDeferredPromise.resolve()}}catch(t){g.logSeqError(t)}}(),function(){try{var t=g.readCookie("visitor_layeruid")||null;if(!t)return;var e=g.getLayerObject(t);if(e&&e.lID&&!e.sts){var r=g.getVisitorCookie();O.sendSaveVisitorLayerRequest(r,e);var n={LayerUid:e.lID,sentToServer:!0,PortalCd:e.pCD,LayerTypeCd:e.lCD};g.setStorageValue("visitor_layeruid",n)}}catch(t){g.logSeqError(t)}}(),O.layerDeferredPromise.promise.then(I),function(){try{var e=g.readCookie("ew_exp")||null;if(!e)return;var n=g.getExperimentObject(e);Object.keys(n).forEach(function(e){var o=n[e];if(void 0!==o.tSt){var a=Number(o.tSt.substring(4,6)),c=Number(o.tSt.substring(2,4)),s=Number(o.tSt.substring(0,2)),u=new Date,l=u.getMonth()+1-c;l<0&&(l+=12),(6==l&&u.getDate()-s>0||l>6||6!=l&&Number(u.getFullYear().toString().substr(-2))-a>0)&&(delete n[e],d("ew_exp",g.getCookieString(n),r))}if(n[e]){var f=T({},"ExperimentUid",e);t.post(i,f,!0).then(function(t){t&&t.Experiment[0].IsArchived&&(delete n[e],d("ew_exp",g.getCookieString(n),r))})}})}catch(t){g.logSeqError(t)}}(),function(){try{var e=function(){for(var t="".concat("ew_exp","="),e=document.cookie.split(";"),r=0;r<e.length;r++){for(var n=e[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return""}();if(e){var r=e.split(",");if((r||[]).length){var n=r[0].split("_");if(n&&n[4]&&3===n[4].length){var o=T({},"portalcd",n[4]);t.post(i,o,!0).then(function(t){t&&(t.experiments=t.Experiment.map(function(t){return t.AbTestVariants=t.AbTestVariants.map(function(t){return t.id=t.Variant,t.Label=t.Label,t.Weight=t.Weight,t}),t.name=t.ExperimentName,t.uId=t.AbTestUid,t.targetPages=t.Pages.map(function(t){return t.matchingType=t.MatchTypeCd,t.url=t.Url,t}),t.targetAudience=t.Audiences.map(function(t){return t.sortIndex=t.SortIndex,t.customAudienceCriteria=function(){return!0},t}),t}),window.allCDNExperiments={experiments:t.experiments,appCd:t.experiments[0].AppCD})}).catch(function(t){})}}}}catch(t){g.logSeqError(t)}}()};setTimeout(function(){!function(){try{h.then(V)}catch(t){g.logSeqError(t)}}(),window.addEventListener("beforeunload",function(){})},0)})();